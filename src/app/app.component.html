<div>
  <h2>ユーザー管理</h2>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>名前</th>
        <th>Email</th>
        <th>アクション</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users$ | async">
        <td>{{ user.id }}</td>
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td>
          <button (click)="editUser(user.id)">編集</button>
          <button (click)="deleteUser(user.id)">削除</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="editUserForm">
    <h3>ユーザー編集</h3>
    <form (submit)="updateUser()">
      <label>名前: </label>
      <input [(ngModel)]="editUserForm.name" name="name" required />
      <br />
      <label>Email: </label>
      <input [(ngModel)]="editUserForm.email" name="email" required />
      <br />
      <button type="submit">更新</button>
    </form>
  </div>

  <div>
    <h3>ユーザー新規作成</h3>
    <form (submit)="createUser(newUser)">
      <label>名前: </label>
      <input [(ngModel)]="newUser.name" name="name" required />
      <br />
      <label>Email: </label>
      <input [(ngModel)]="newUser.email" name="email" required />
      <br />
      <button type="submit">作成</button>
    </form>
  </div>

  <div *ngIf="error$ | async as error">
    <p>エラー: {{ error }}</p>
  </div>
</div>